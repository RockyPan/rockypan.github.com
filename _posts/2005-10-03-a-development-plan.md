---
layout: post
title: 开发计划(2005/10/02)
category: 技术
tags: [其他, 网络]
keywords:
---

## 开发日志(2005/10/02)

今天终于把通讯层跑通了，实现了从模拟的客户端把消息发送到服务端，服务端收到消息后可以还原为相应的消息对象。把服务端的反应器，事件处理器，消息队列及消息分派器调通。消息的散例集测试通过。 

很早以前我写程序就养成了习惯，先写测试案例，最坏的情况也会在大致实现一个小的功能后马上补测试案例。并把运行测试案例配置为编译后事件。每做一点小小的改动，马上按F7，编译并运行测试案例。 

写普通的应用这种方式可以工作的非常好，可是对于网络应用和多线程应用，却很难规划单元测试。比如网络功能要同时运行客户端和服务器端，多线程的很多功能点是针对线程交互情况的，很难写出测试案例。 

这次也碰到这种情况，对于上层的功能，我都针对类及方法写了单元测试。但通讯层却不好搞，在第一次调通后，我基本上就没调试，只闷着头写代码（主要是我的电脑同时开两个Visual Studio会变得很慢，VAX也会出问题）。结果功能大致完成后再调试时很辛苦。因为通讯层是多线程，有时问题有同时出现在客户端和服务器端，很难定位，总之是花了不少精力。而如果是小步小步调试运行的话，出现问题可以很容易的定位，因为问题十有八九出在新加的代码上。 

所以只要有可能，应该随时保证程序是可编译的，可正常运行的，尽量多写测试案例。最好是养成这样的习惯。

